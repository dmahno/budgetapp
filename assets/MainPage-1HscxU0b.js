var A=Object.defineProperty;var E=(s,t,n)=>t in s?A(s,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):s[t]=n;var w=(s,t,n)=>E(s,typeof t!="symbol"?t+"":t,n);import{r as i,j as e,m as L,o as h}from"./react-vendor-CydBeP13.js";import{b3 as O}from"./vendor-LCbWzvVK.js";import{b as p,M as T,I as R,B as S}from"./ant-design-vendor-Pr8IEzyH.js";import"./index-OLcj7Rh8.js";const k=s=>i.createElement("svg",{width:36,height:36,viewBox:"0 0 36 36",fill:"none",xmlns:"http://www.w3.org/2000/svg",...s},i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M19.5 9C19.5 8.17157 18.8284 7.5 18 7.5C17.1716 7.5 16.5 8.17157 16.5 9V16.5H9C8.17157 16.5 7.5 17.1716 7.5 18C7.5 18.8284 8.17157 19.5 9 19.5H16.5V27C16.5 27.8284 17.1716 28.5 18 28.5C18.8284 28.5 19.5 27.8284 19.5 27V19.5H27C27.8284 19.5 28.5 18.8284 28.5 18C28.5 17.1716 27.8284 16.5 27 16.5H19.5V9Z"})),B=s=>i.createElement("svg",{width:36,height:36,viewBox:"0 0 36 36",fill:"none",xmlns:"http://www.w3.org/2000/svg",...s},i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M29.9436 19.1707C29.9809 18.7855 30 18.395 30 18C30 11.3726 24.6274 6 18 6C11.3726 6 6 11.3726 6 18C6 24.6274 11.3726 30 18 30C19.2925 30 20.5373 29.7956 21.7039 29.4175C22.3649 30.4534 23.4384 31.2006 24.6928 31.4278C22.6781 32.4339 20.4051 33 18 33C9.71573 33 3 26.2843 3 18C3 9.71573 9.71573 3 18 3C26.2843 3 33 9.71573 33 18C33 18.5878 32.9662 19.1678 32.9004 19.738C32.0044 19.1119 30.9289 18.9613 29.9436 19.1707ZM13.5 11.4C13.5 10.0745 14.5745 9 15.9 9H19.5C22.8137 9 25.5 11.6863 25.5 15C25.5 18.3137 22.8137 21 19.5 21H16.5V22.5H20.25C20.6642 22.5 21 22.8358 21 23.25C21 23.6642 20.6642 24 20.25 24H16.5V25.5C16.5 26.3284 15.8284 27 15 27C14.1716 27 13.5 26.3284 13.5 25.5V24H11.25C10.8358 24 10.5 23.6642 10.5 23.25C10.5 22.8358 10.8358 22.5 11.25 22.5H13.5V21H11.25C10.8358 21 10.5 20.6642 10.5 20.25C10.5 19.8358 10.8358 19.5 11.25 19.5H13.5V11.4ZM19.5 18C21.1569 18 22.5 16.6569 22.5 15C22.5 13.3431 21.1569 12 19.5 12H16.5V18H19.5ZM24 27C24 26.1716 24.6716 25.5 25.5 25.5L30 25.5V22.8107C30 22.1425 30.8079 21.8079 31.2803 22.2803L34.9393 25.9393C35.5251 26.5251 35.5251 27.4749 34.9393 28.0607L31.2803 31.7197C30.8079 32.1921 30 31.8575 30 31.1893V28.5L25.5 28.5C24.6716 28.5 24 27.8284 24 27Z"})),D="c-j1uHIF",I="-aQyJWMz",W="hMe-qoqo",$="UlJbvRCE",Z="_1xoHqSXK",F="JWM3UXOB",u={button:D,primary:I,secondary:W,iconWrapper:$,iconContainer:Z,textWrapper:F},g=({icon:s,text:t,onClick:n,appearance:r="primary",...a})=>{const o=s||(r==="primary"?k:B);return e.jsxs("button",{className:`${u.button} ${u[r]}`,onClick:n,...a,children:[e.jsx("div",{className:u.iconWrapper,children:o&&e.jsx(o,{})}),e.jsx("div",{className:u.textWrapper,children:t})]})},J="financeApp",v="operations",x=()=>O(J,1,{upgrade(s){s.objectStoreNames.contains(v)||s.createObjectStore(v,{keyPath:"id",autoIncrement:!0})}});class _{constructor(){w(this,"operationsList",[]);L(this),this.loadOperations()}async loadOperations(){const t=await x();this.operationsList=await t.getAll("operations")}async addOperation(t,n,r){if(r==="exclude"&&t>this.totalSum){p.error(`Недостаточно средств. Максимальная сумма для списания: ${this.totalSum} ₽`);return}const a=await x(),o={amount:t,description:n,type:r,date:new Date},C=await a.add("operations",o);this.operationsList.push({...o,id:C})}async deleteOperation(t){await(await x()).delete("operations",t),this.operationsList=this.operationsList.filter(r=>r.id!==t)}get totalSum(){return this.operationsList.reduce((t,n)=>n.type==="add"?t+n.amount:t-n.amount,0)}}const j=new _,U="_92XQlLOJ",X="MGwEIl2w",q="Llj3ltoo",m={totalSum:U,sumTitle:X,cents:q},Q=h(()=>{const{totalSum:s}=j;return e.jsxs("div",{className:m.sum,children:[e.jsx("h1",{className:m.sumTitle,children:"Мой бюджет"}),e.jsxs("h1",{className:m.totalSum,children:[s.toLocaleString(),e.jsx("span",{className:m.cents,children:" ₽"})]})]})}),P="jEAoCZyx",z="lXUT6oQR",G="_0JtH342Z",l={buttons:P,amountDisplay:z,controls:G},K=h(()=>{const[s,t]=i.useState(!1),[n,r]=i.useState(null),[a,o]=i.useState(0),C=()=>{r("add"),t(!0),o(0)},y=()=>{r("extract"),t(!0),o(0)},M=()=>{a>0?(n==="add"?(j.addOperation(a,"Пополнение","add"),p.success(`Сумма ${d(a)} добавлена`)):n==="extract"&&(j.addOperation(a,"Списание","exclude"),p.success(`Сумма ${d(a)} списана`)),t(!1),o(0)):p.error("Пожалуйста, введите корректную сумму")},b=()=>{t(!1),o(0)},d=c=>c.toLocaleString("ru-RU"),f=()=>o(c=>c+1e3),H=()=>o(c=>Math.max(0,c-1e3)),N=c=>{const V=Number(c.target.value.replace(/\D/g,""));o(V)};return e.jsxs("div",{className:l.buttons,children:[e.jsx(g,{text:"Пополнить",onClick:C}),e.jsx(g,{text:"Списать",appearance:"secondary",onClick:y}),e.jsxs(T,{title:n==="add"?"Пополнить счет":"Списать средства",open:s,onOk:M,onCancel:b,children:[e.jsx("div",{className:l.amountDisplay,children:e.jsxs("span",{className:l.amount,children:[d(a)," ₽"]})}),e.jsx(R,{type:"text",value:a>0?d(a):"",placeholder:"Введите сумму",onChange:N,className:l.inputField}),e.jsxs("div",{className:l.controls,children:[e.jsx(S,{onClick:H,disabled:a<=0,children:"-"}),e.jsx(S,{onClick:f,children:"+"})]})]})]})}),Y={},tt=h(()=>e.jsxs("div",{className:Y.container,children:[e.jsx(Q,{}),e.jsx(K,{})]})),rt=h(()=>e.jsx(e.Fragment,{children:e.jsx(tt,{})}));export{rt as MainPage};
